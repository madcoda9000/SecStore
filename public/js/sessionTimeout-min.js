window.sessionTimeout=function(e){const t=Object.assign({appendTimestamp:!1,keepAliveMethod:"POST",keepAliveUrl:"/keep-alive",logOutBtnText:"Log out now",logOutUrl:"/log-out",message:"Your session is about to expire.",stayConnectedBtnText:"Stay connected",timeOutAfter:12e5,timeOutUrl:"/timed-out",titleText:"Session Timeout",warnAfter:9e5,showCountDownTimer:!1,showCountDownTimerInDialog:!1,countDownTimerInDialogId:"remainingTimeInDialog",countDownTimerId:"remainingTime"},e);let n,i,o,s=document.getElementById(t.countDownTimerId),a=Date.now()+t.timeOutAfter;const d=()=>{let e=Math.max(0,Math.round((a-Date.now())/1e3)),n=Math.floor(e/60),i=e%60,d=`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}`;s&&(s.innerText=d),t.showCountDownTimerInDialog&&h&&(h.innerText=d),e<=0&&clearInterval(o)},l=()=>{r.classList.remove("sessionTimeout--hidden")},m=()=>{window.location=t.timeOutUrl},r=document.createElement("div"),u=document.createElement("div"),c=document.createElement("div"),T=document.createElement("div"),p=document.createElement("div"),w=document.createElement("button"),g=document.createElement("button");let h;w.addEventListener("click",(()=>{window.location=t.logOutUrl})),g.addEventListener("click",(()=>{r.classList.add("sessionTimeout--hidden");const e=t.appendTimestamp?`${t.keepAliveUrl}?time=${Date.now()}`:t.keepAliveUrl,o=new XMLHttpRequest;o.open(t.keepAliveMethod,e),o.send(),a=Date.now()+t.timeOutAfter,n=setTimeout(l,t.warnAfter),clearTimeout(i),i=setTimeout(m,t.timeOutAfter)})),r.classList.add("sessionTimeout","sessionTimeout--hidden"),u.classList.add("sessionTimeout-modal"),T.classList.add("sessionTimeout-title"),c.classList.add("sessionTimeout-content"),p.classList.add("sessionTimeout-buttons"),w.classList.add("btn","btn-secondary"),w.style.marginRight="15px",g.classList.add("btn","btn-primary"),T.innerText=t.titleText,c.innerText=t.message,w.innerText=t.logOutBtnText,g.innerText=t.stayConnectedBtnText,t.showCountDownTimerInDialog&&(h=document.createElement("span"),h.id=t.countDownTimerInDialogId,h.style.display="block",h.style.marginTop="10px",h.style.fontWeight="bold",c.appendChild(h)),u.appendChild(T),u.appendChild(c),u.appendChild(p),p.appendChild(w),p.appendChild(g),r.appendChild(u),document.body.appendChild(r),n=setTimeout(l,t.warnAfter),i=setTimeout(m,t.timeOutAfter),t.showCountDownTimer&&(o=setInterval(d,1e3),d())};