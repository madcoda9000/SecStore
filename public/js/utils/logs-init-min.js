document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("log-messages");e&&(window.messages={msg4:e.getAttribute("data-msg4"),msg5:e.getAttribute("data-msg5"),msg6:e.getAttribute("data-msg6")});const t=document.getElementById("log-config");function o(e){const t=document.createElement("div");t.className="alert alert-danger alert-dismissible fade show position-fixed",t.style.cssText="\n            top: 20px;\n            right: 20px;\n            z-index: 9999;\n            min-width: 300px;\n            max-width: 500px;\n        ",t.innerHTML=`\n            <strong>Error:</strong> ${e}\n            <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>\n        `,document.body.appendChild(t),setTimeout((()=>{t.parentElement&&t.remove()}),1e4)}t&&(window.logConfig={type:t.getAttribute("data-type"),fetchUrl:t.getAttribute("data-fetch-url"),autoFetch:"true"===t.getAttribute("data-auto-fetch")}),!1!==window.logConfig?.autoFetch&&function(){if("function"==typeof fetchLogs)try{fetchLogs()}catch(e){o("Failed to load log data. Please refresh the page.")}else setTimeout((()=>{"function"==typeof fetchLogs?fetchLogs():o("Log functionality not available. Please check if all scripts are loaded.")}),500)}();const n=window.fetch;window.fetch=function(...e){return n.apply(this,e).catch((t=>{const n=e[0];throw"string"==typeof n&&n.includes("/admin/logs/fetch")&&o("Failed to fetch log data. Please check your connection."),t}))},window.refreshLogs=function(){"function"==typeof fetchLogs?fetchLogs():o("Refresh not available. Please reload the page.")},window.resetLogSearch=function(){const e=document.getElementById("search");e&&(e.value="","function"==typeof fetchLogs&&fetchLogs())},window.location.search.includes("debug=1")&&(window.logDebug={refreshLogs:window.refreshLogs,resetSearch:window.resetLogSearch,config:window.logConfig,messages:window.messages,testFetch:()=>{window.logConfig?.fetchUrl&&fetch(window.logConfig.fetchUrl+"?search=&pageSize=10&page=1").then((e=>e.json())).then((e=>{})).catch((e=>{}))}})}));