document.addEventListener("DOMContentLoaded",(function(){const n=document.getElementById("copyBackupCodes"),e=document.getElementById("downloadBackupCodes"),t=document.getElementById("printBackupCodes"),o=document.getElementById("backupCodesDisplay"),d=document.getElementById("2fa-messages");function i(){const e=n.innerHTML,t=d?d.getAttribute("data-codes-copied"):"Copied!";n.innerHTML='<i class="bi bi-check-circle-fill"></i> '+t,n.classList.add("btn-success"),n.classList.remove("btn-outline-primary"),setTimeout((()=>{n.innerHTML=e,n.classList.remove("btn-success"),n.classList.add("btn-outline-primary")}),2e3)}function c(n){const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),i()}catch(n){alert("Failed to copy to clipboard. Please copy manually.")}document.body.removeChild(e)}o&&(n&&n.addEventListener("click",(function(){const n=o.textContent;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then((()=>{i()})).catch((e=>{c(n)})):c(n)})),e&&e.addEventListener("click",(function(){const n=o.textContent,e="2FA_Backup_Codes_"+(new Date).toISOString().split("T")[0]+".txt",t="2FA BACKUP CODES\nGenerated: "+(new Date).toLocaleString()+"\n=====================================\n\n"+n+"\n\n‚ö†Ô∏è Keep these codes in a secure location!\nEach code can only be used once.\n",d=new Blob([t],{type:"text/plain"}),i=window.URL.createObjectURL(d),c=document.createElement("a");if(c.href=i,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i),c){}})),t&&t.addEventListener("click",(function(){const n=o.textContent,e=window.open("","_blank","width=600,height=400");e&&(e.document.write(`\n                    <!DOCTYPE html>\n                    <html>\n                    <head>\n                        <title>2FA Backup Codes</title>\n                        <style>\n                            body {\n                                font-family: Arial, sans-serif;\n                                padding: 20px;\n                                max-width: 600px;\n                                margin: 0 auto;\n                            }\n                            h1 {\n                                border-bottom: 2px solid #333;\n                                padding-bottom: 10px;\n                            }\n                            .codes {\n                                font-family: 'Courier New', monospace;\n                                font-size: 14px;\n                                background: #f5f5f5;\n                                padding: 15px;\n                                border: 1px solid #ddd;\n                                white-space: pre-wrap;\n                            }\n                            .warning {\n                                background: #fff3cd;\n                                border: 1px solid #ffc107;\n                                padding: 10px;\n                                margin-top: 20px;\n                                border-radius: 4px;\n                            }\n                            @media print {\n                                body { padding: 0; }\n                                .warning { page-break-after: avoid; }\n                            }\n                        </style>\n                    </head>\n                    <body>\n                        <h1>üîê 2FA Backup Codes</h1>\n                        <p><strong>Generated:</strong> ${(new Date).toLocaleString()}</p>\n                        <div class="codes">${function(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}(n)}</div>\n                        <div class="warning">\n                            <strong>‚ö†Ô∏è Important:</strong>\n                            <ul>\n                                <li>Keep these codes in a secure location</li>\n                                <li>Each code can only be used once</li>\n                                <li>Use them when you don't have access to your authenticator device</li>\n                            </ul>\n                        </div>\n                    </body>\n                    </html>\n                `),e.document.close(),e.onload=function(){e.focus(),e.print()})})))}));